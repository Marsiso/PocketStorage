@using System.Globalization
@using Microsoft.Extensions.Localization
@using PocketStorage.Client.Shared.ResourceFiles

@inject NavigationManager Navigation
@inject IJSRuntime  JavaScriptRuntime
@inject IStringLocalizer<Resource> Localizer

<MudButtonGroup Color="Color.Inherit" Variant="Variant.Text">
    <MudButton Color="Color.Inherit" Variant="Variant.Text" OnClick="@SetCzechCulture">
        <MudText>CS</MudText>
    </MudButton>
    <MudButton Color="Color.Inherit" Variant="Variant.Text" OnClick="@SetEnglishCulture">
        <MudText>EN</MudText>
    </MudButton>
</MudButtonGroup>

@code {
    public void SetCzechCulture() => Culture = new CultureInfo("cs");
    public void SetEnglishCulture() => Culture = new CultureInfo("en");

    public CultureInfo Culture
    {
        get => CultureInfo.CurrentCulture;
        set
        {
            if (Equals(CultureInfo.CurrentCulture, value))
            {
                return;
            }

            (JavaScriptRuntime as IJSInProcessRuntime)?.InvokeVoid("blazorCulture.set", value.Name);
            Navigation.NavigateTo(Navigation.Uri, forceLoad: true);
        }
    }
}
