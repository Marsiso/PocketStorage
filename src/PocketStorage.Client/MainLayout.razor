@using PocketStorage.Client.Shared.ResourceFiles
@using Microsoft.Extensions.Localization
@using PocketStorage.BFF.Authorization.Enums
@using PocketStorage.BFF.Authorization.Components
@using PocketStorage.Client.Shared.Components.Layout
@inherits LayoutComponentBase

@inject IStringLocalizer<Resource> Localizer

<MudThemeProvider IsDarkMode="true"/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<PermitView Context="ParentAuthenticationState">
    <Authorized>
        <MudLayout>
            <MudAppBar Color="Color.Inherit">
                <MudButton Href="/" StartIcon="@Icons.Material.Rounded.RocketLaunch" IconSize="Size.Large" Color="Color.Inherit" Variant="Variant.Text">
                    <MudText Typo="Typo.h6" Inline="true">@Localizer["Common_AppName"]</MudText>
                </MudButton>
                <MudButton Href="/" StartIcon="@Icons.Material.Rounded.Home" IconSize="Size.Medium" Color="Color.Inherit" Variant="Variant.Text" Class="ml-2">
                    <MudText>@Localizer["Layout_MainLayout_HomeButton"]</MudText>
                </MudButton>
                <MudButton Href="/privacy" StartIcon="@Icons.Material.Rounded.Security" IconSize="Size.Medium" Color="Color.Inherit" Variant="Variant.Text" Class="ml-2">
                    <MudText>@Localizer["Layout_MainLayout_PrivacyButton"]</MudText>
                </MudButton>
                <PermitView Permissions="Permission.ViewUsers">
                    <Authorized>
                        <MudButton Href="/user/claims" StartIcon="@Icons.Material.Rounded.Shield" IconSize="Size.Medium" Color="Color.Inherit" Variant="Variant.Text" Class="ml-2">
                            <MudText>@Localizer["Layout_MainLayout_ClaimsButton"]</MudText>
                        </MudButton>
                    </Authorized>
                </PermitView>
                <MudSpacer/>
                <CultureSelector/>
                <Authenticator/>
                <Avatar/>
            </MudAppBar>
            <MudMainContent>
                <MudContainer Class="pt-6">
                    @Body
                </MudContainer>
            </MudMainContent>
        </MudLayout>
    </Authorized>
    <Authorizing>
        <MudSkeleton SkeletonType="SkeletonType.Rectangle" Width="100%" Height="75px" Class="mb-6 px-6"/>
        <MudStack Spacing="6" Class="pa-6">
            <MudSkeleton SkeletonType="SkeletonType.Rectangle" Width="100%" Height="125px"/>
            <MudSkeleton SkeletonType="SkeletonType.Rectangle" Width="100%" Height="250px"/>
            <MudSkeleton SkeletonType="SkeletonType.Rectangle" Width="100%" Height="50px"/>
            <MudSkeleton SkeletonType="SkeletonType.Rectangle" Width="100%" Height="50px"/>
            <MudSkeleton SkeletonType="SkeletonType.Rectangle" Width="100%" Height="50px"/>
            <MudSkeleton SkeletonType="SkeletonType.Rectangle" Width="100%" Height="250px"/>
            <MudSkeleton SkeletonType="SkeletonType.Rectangle" Width="100%" Height="125px"/>
        </MudStack>
    </Authorizing>
</PermitView>
